# Структура данных пользователя

Этот документ описывает структуру хранения данных пользователя в системе целеполагания.

## Директории

### `goals/` — Цели пользователя

Каждая цель сохраняется в отдельном файле `goals/[goal_id].md`.

**Формат ID цели:** `goal_YYYY_MM_DD_[краткое_описание]`

**Пример:** `goal_2024_01_15_transition_to_it.md`

**Структура файла цели:**
- Метаданные (дата создания, статус, последнее обновление)
- Стратегический уровень (идентичность, убеждения, доказательства)
- Тактический уровень (OKR или SMART)
- Операционный уровень (Implementation Intentions, Tiny Habits)
- История изменений

Подробнее см. `prompts/goal_management.md`

### `reflections/` — Рефлексии пользователя

Рефлексии организованы по типам и датам:

```
reflections/
├── daily/YYYY/MM/YYYY-MM-DD.md
├── weekly/YYYY/week_NN_YYYY.md
├── monthly/YYYY/YYYY-MM.md
├── quarterly/YYYY/QN_YYYY.md
└── yearly/YYYY.md
```

**Ежедневная рефлексия содержит:**
- Активные цели на день
- План операционных действий
- План тактических задач
- Заполнение (что сделано)
- Доказательства идентичности
- Препятствия и решения
- Оценка дня
- Инсайты
- План на завтра
- Комментарии ИИ-системы (генерируются автоматически)

Подробнее см. `prompts/reflection_management.md`

### `dashboards/` — Дашборды и визуализации

Дашборды создаются по запросу и содержат:
- Статистику выполнения
- Графики прогресса
- Тренды
- Инсайты и рекомендации

```
dashboards/
├── daily/YYYY-MM-DD.md
├── weekly/week_NN_YYYY.md
├── monthly/YYYY-MM.md
├── quarterly/QN_YYYY.md
└── yearly/YYYY.md
```

Подробнее см. `prompts/dashboard_generation.md`

## Python скрипты

### `scripts/generate_reflection.py`

Генерирует шаблон ежедневной рефлексии на основе активных целей.

**Использование:**
```bash
# Генерация на сегодня
python scripts/generate_reflection.py

# Генерация на конкретную дату
python scripts/generate_reflection.py --date 2024-01-15
```

**Что делает:**
1. Читает все активные цели из `goals/`
2. Извлекает операционные действия и тактические задачи
3. Создаёт шаблон рефлексии с планом на день
4. Сохраняет в `reflections/daily/YYYY/MM/YYYY-MM-DD.md`

### `scripts/analyze_reflection.py`

Анализирует заполненную рефлексию и генерирует комментарии ИИ-системы.

**Использование:**
```bash
# Анализ рефлексии за сегодня
python scripts/analyze_reflection.py

# Анализ рефлексии за конкретную дату
python scripts/analyze_reflection.py --date 2024-01-15

# Анализ конкретного файла
python scripts/analyze_reflection.py --file reflections/daily/2024/01/2024-01-15.md
```

**Что делает:**
1. Парсит заполненную рефлексию
2. Анализирует выполнение операций и тактики
3. Выявляет препятствия и паттерны
4. Генерирует комментарии с анализом, рекомендациями и адаптациями
5. Обновляет файл рефлексии, добавляя секцию "Комментарии ИИ-системы"

## Рабочий процесс

### 1. Создание цели

1. Пользователь формулирует цель с помощью ИИ-коуча
2. Создаётся трёхуровневая система (Стратегия → Тактика → Операции)
3. Цель сохраняется в `goals/[goal_id].md`

### 2. Ежедневная работа

1. **Утро:** Генерируется шаблон рефлексии на день
   ```bash
   python scripts/generate_reflection.py
   ```
2. **В течение дня:** Пользователь заполняет рефлексию, отмечая выполненные действия
3. **Вечер:** Анализируется заполненная рефлексия
   ```bash
   python scripts/analyze_reflection.py
   ```
4. **При необходимости:** Адаптируются цели на основе анализа

### 3. Регулярные обзоры

- **Еженедельно:** Создаётся еженедельная рефлексия и дашборд
- **Ежемесячно:** Создаётся ежемесячная рефлексия и дашборд
- **Ежеквартально:** Оценка OKR, создание квартального дашборда
- **Ежегодно:** Годовая рефлексия и планирование на следующий год

## Интеграция компонентов

```
┌─────────────┐
│   Цели      │ ← Создаются ИИ-коучем
│  (goals/)   │
└──────┬──────┘
       │
       ├─────────────────┐
       │                 │
       ▼                 ▼
┌──────────────┐  ┌──────────────┐
│  Рефлексии    │  │  Дашборды    │
│ (reflections/│  │ (dashboards/) │
│              │  │               │
│ Генерируются │  │ Создаются по  │
│ скриптами    │  │ запросу       │
└──────┬───────┘  └───────┬───────┘
       │                 │
       └────────┬─────────┘
                │
                ▼
         ┌──────────────┐
         │   Анализ и   │
         │  адаптация   │
         │    целей     │
         └──────────────┘
```

## Рекомендации

1. **Регулярность:** Генерируй рефлексии ежедневно
2. **Анализ:** Анализируй рефлексии сразу после заполнения
3. **Адаптация:** Обновляй цели при необходимости, но не слишком часто
4. **Резервное копирование:** Регулярно делай бэкап директорий `goals/` и `reflections/`

