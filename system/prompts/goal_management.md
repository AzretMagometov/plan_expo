# Промпт для управления целями

## Задача
Управление сохранением, обновлением и проверкой целей пользователя в директории `goals/`.

## Структура файла цели

Каждая цель сохраняется в отдельном файле `goals/[goal_id].md` со следующей структурой:

```markdown
# Цель: [название]

**Дата создания:** [дата]
**Статус:** active | completed | paused | cancelled
**Подстатус:** [если paused/cancelled: forced | voluntary | plan_adjustment]
**Последнее обновление:** [дата]
**Тип последнего изменения:** [PROGRESS | FORCED_CHANGE | VOLUNTARY_CHANGE | PLAN_ADJUSTMENT]

## СТРАТЕГИЧЕСКИЙ УРОВЕНЬ

**Идентичность:** [формулировка]

**Убеждения:**
- [убеждение 1]
- [убеждение 2]
- [убеждение 3]

**Доказательства идентичности:**
- [действие] = [доказательство]
- [действие] = [доказательство]

**Горизонт:** 1-5 лет

## ТАКТИЧЕСКИЙ УРОВЕНЬ

**Метод:** OKR | SMART

### Objective (если OKR):
[вдохновляющая цель]

### Key Results:
- **KR1:** [метрика] | Текущее: [значение] | Целевое: [значение] | Прогресс: [%]
- **KR2:** [метрика] | Текущее: [значение] | Целевое: [значение] | Прогресс: [%]
- **KR3:** [метрика] | Текущее: [значение] | Целевое: [значение] | Прогресс: [%]

### SMART-цель (если SMART):
[полная формулировка]
- S: [конкретика]
- M: [метрики]
- A: [достижимость]
- R: [релевантность]
- T: [временные рамки]

**Горизонт:** 3-12 месяцев
**Дедлайн:** [дата]

## ОПЕРАЦИОННЫЙ УРОВЕНЬ

### Implementation Intentions:
- ЕСЛИ [триггер] → ТО [действие]
- ЕСЛИ [триггер] → ТО [действие]

### Tiny Habits:
- После [якорь] → [действие] → [празднование]
- После [якорь] → [действие] → [празднование]

**Горизонт:** ежедневно

## КРИТИЧЕСКИЕ СОБЫТИЯ

[Список критических событий, которые повлияли на цель]

**Формат:**
- **[дата]:** [тип события] - [краткое описание]
  - **Причина:** [детальное описание]
  - **Влияние:** [как повлияло на цель]
  - **Действия:** [что было сделано]
  - **Результат:** [новая цель/адаптация/статус]

## ИСТОРИЯ ИЗМЕНЕНИЙ

[Хронология всех изменений с типами]

**Формат записей:**
- [дата]: [ТИП] [краткое описание]
  - **Детали:** [подробности]
  - **Метрики до:** [значения]
  - **Метрики после:** [значения]
  - **Причина:** [почему изменилось]

**Типы изменений:**
- `[PROGRESS]` - естественный прогресс, обновление метрик
- `[FORCED_CHANGE]` - вынужденное изменение (авария, кризис, форс-мажор)
- `[VOLUNTARY_CHANGE]` - добровольное изменение (переосмысление, новые приоритеты)
- `[PLAN_ADJUSTMENT]` - корректировка тактических/операционных планов
```

## Процесс сохранения цели

### Шаг 1: Создание файла цели

После того, как пользователь прошёл все этапы (формулировка, 3 уровня, чеклисты):

1. Создай уникальный ID для цели (например: `goal_2024_01_15_transition_to_it`)
2. Создай файл `goals/[goal_id].md`
3. Заполни всю структуру данными из диалога
4. Установи статус: `active`

### Шаг 2: Обновление цели

При обновлении прогресса или изменении планов:

1. Открой файл цели
2. Обнови соответствующие разделы:
   - Текущие значения метрик (Key Results)
   - Процент прогресса
   - Доказательства идентичности
   - Статус (если изменился)
3. Добавь запись в "ИСТОРИЯ ИЗМЕНЕНИЙ"
4. Обнови "Последнее обновление"

### Шаг 3: Проверка цели при отслеживании прогресса

При анализе прогресса:

1. Прочитай файл цели из `goals/`
2. Используй данные для:
   - Сравнения текущего прогресса с планом
   - Проверки связи между уровнями
   - Оценки реалистичности целей
   - Предложения корректировок

## Правила работы с файлами целей

1. **Один файл = одна цель** — не смешивай несколько целей
2. **Всегда обновляй дату** при изменениях
3. **Веди историю** — записывай все значимые изменения
4. **Проверяй связность** — тактика должна вести к стратегии, операции к тактике
5. **Обновляй статус** — active, completed, paused, cancelled

## Примеры статусов

- **active** — цель активна, работа идёт
- **completed** — цель достигнута
- **paused** — временно приостановлена (с указанием причины)
  - **Подстатус:** `forced` (вынужденно) или `voluntary` (добровольно)
- **cancelled** — отменена (с указанием причины)
  - **Подстатус:** `forced` (вынужденно) или `voluntary` (добровольно)

## Работа с изменениями

При любом изменении цели используй `prompts/goal_change_tracking.md` для:
- Определения типа изменения
- Правильного документирования
- Выявления критических событий

## Интеграция с рефлексиями

При генерации шаблона рефлексии:
1. Прочитай все активные цели из `goals/`
2. Извлеки из них:
   - Операционные действия на сегодня
   - Тактические метрики для отслеживания
   - Стратегические доказательства идентичности
3. Включи в шаблон рефлексии

## Интеграция с дашбордами

При генерации дашборда:
1. Прочитай файлы целей
2. Извлеки метрики для визуализации
3. Рассчитай прогресс по всем уровням
4. Создай графики и отчёты

